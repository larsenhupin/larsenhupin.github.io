<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://blog.sparkland.ca/feed.xml" rel="self" type="application/atom+xml" /><link href="https://blog.sparkland.ca/" rel="alternate" type="text/html" /><updated>2024-08-20T23:37:32-04:00</updated><id>https://blog.sparkland.ca/feed.xml</id><title type="html">Sparkland Blog</title><subtitle>Blog about various projects</subtitle><entry><title type="html">Simple Arduino Blink LED AVC-C on Linux</title><link href="https://blog.sparkland.ca/simple-arduino-blink-led-avr-c-on-linux/" rel="alternate" type="text/html" title="Simple Arduino Blink LED AVC-C on Linux" /><published>2024-08-17T00:22:04-04:00</published><updated>2024-08-17T00:22:04-04:00</updated><id>https://blog.sparkland.ca/simple-arduino-blink-led-avr-c-on-linux</id><content type="html" xml:base="https://blog.sparkland.ca/simple-arduino-blink-led-avr-c-on-linux/"><![CDATA[<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="c1">// main.c</span>

<span class="cp">#define F_CPU   16000000UL // Set clock speed
</span>
<span class="cp">#include</span> <span class="cpf">&lt;avr/io.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;util/delay.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>

    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">delay</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>

    <span class="c1">// Set PORTB5 as an output</span>
    <span class="n">DDRB</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">DDB5</span><span class="p">);</span>

    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
       <span class="c1">// Set PORTB5</span>
       <span class="n">PORTB</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PORTB5</span><span class="p">);</span>

       <span class="c1">// Wait</span>
       <span class="n">_delay_ms</span><span class="p">(</span><span class="n">delay</span><span class="p">);</span>

       <span class="c1">// Unset PORTB5</span>
       <span class="n">PORTB</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;&lt;</span> <span class="n">PORTB5</span><span class="p">);</span>

       <span class="c1">// Wait</span>
       <span class="n">_delay_ms</span><span class="p">(</span><span class="n">delay</span><span class="p">);</span>

    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-make" data-lang="make"><span class="c"># Makefile
</span>
<span class="nl">default</span><span class="o">:</span>
        <span class="err">avr-gcc</span> <span class="err">-Os</span> <span class="nv">-mmcu</span><span class="o">=</span>atmega328p <span class="nt">-c</span> <span class="nt">-o</span> bin/main.o main.c
        <span class="err">avr-gcc</span> <span class="err">-o</span> <span class="err">bin/main.bin</span> <span class="err">bin/main.o</span>
        <span class="err">avr-objcopy</span> <span class="err">-O</span> <span class="err">ihex</span> <span class="err">-R</span> <span class="err">.eeprom</span> <span class="err">bin/main.bin</span> <span class="err">bin/main.hex</span>

<span class="nl">upload</span><span class="o">:</span>
        <span class="nl">sudo avrdude -F -V -c arduino -p ATMEGA328P -P /dev/ttyACM0 -b 115200 -U flash</span><span class="o">:</span><span class="nf">w:main.hex</span></code></pre></figure>]]></content><author><name></name></author><summary type="html"><![CDATA[]]></summary></entry></feed>